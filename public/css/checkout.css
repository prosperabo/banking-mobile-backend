/* =========================================
   VARIABLES & SETUP
   ========================================= */
:root {
  --c-p-dark: #570F0D;
  --c-p-normal: #FF2822;
  --c-p-light: #EE4444;
  --c-n-black: #000000;
  --c-n-darkGrey: #585858;
  --c-n-lightGrey: #ACACAC;
  --c-n-white: #FFFFFF;

  --radius-card: 20px;
  --radius-btn: 12px;
  --shadow-soft: 0 10px 40px -10px rgba(0,0,0,0.15);
}

* { box-sizing: border-box; }

body {
  font-family: 'Nunito Sans', Arial, sans-serif;
  min-height: 100vh;
  margin: 0;
  background-color: #F4F6F8; 
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

/* =========================================
   LAYOUT GENERAL
   ========================================= */
.main-container {
  width: 100%;
  background: var(--c-n-white);
  border-radius: 30px;
  box-shadow: var(--shadow-soft);
  display: flex;
  flex-direction: column;
  overflow: hidden; 
}

/* Header Título */
.header h1 {
  font-size: 1.2rem;
  color: var(--c-p-dark);
  margin: 0 0 20px 0;
  font-weight: 800;
  text-transform: uppercase;
}

/* =========================================
   TARJETA VISUAL (Izquierda/Arriba)
   ========================================= */
.visual-card {
  background: linear-gradient(135deg, var(--c-p-normal) 0%, var(--c-p-dark) 100%);
  border-radius: var(--radius-card);
  padding: 25px;
  color: var(--c-n-white);
  position: relative;
  overflow: hidden;
  box-shadow: 0 15px 35px rgba(255, 40, 34, 0.3);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  aspect-ratio: 1.586; 
  width: 100%;
  max-width: 380px;
  margin: 0 auto;
}

.visual-card::before {
  content: '';
  position: absolute;
  top: -50%; right: -50%; width: 100%; height: 100%;
  background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 60%);
  transform: scale(2);
}

.card-top { display: flex; justify-content: space-between; align-items: center; }
.chip { width: 45px; height: 32px; background: linear-gradient(135deg, #FFD700 0%, #D4AF37 100%); border-radius: 6px; }
.contactless-icon svg { fill: rgba(255,255,255,0.7); width: 24px; }
.card-number-display { font-size: 1.4rem; letter-spacing: 2px; font-family: 'Courier New', monospace; font-weight: 700; margin-top: 10px; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
.card-details { display: flex; justify-content: space-between; font-size: 0.8rem; text-transform: uppercase; }
.card-details label { font-size: 0.6rem; opacity: 0.8; display: block; }

/* =========================================
   FORMULARIO Y CONTENEDOR CLIP (LÓGICA CENTRAL)
   ========================================= */
.payment-section {
  display: flex; flex-direction: column; gap: 20px;
}

/* ESTE ES EL CONTENEDOR CLAVE 
   Garantiza el centrado vertical y horizontal en todas las resoluciones
*/
#checkout {
  width: 100%;
  /* Altura fija solicitada */
  min-height: 300px !important;
  background: transparent;
  
  /* Flexbox para centrar al hijo (iframe) */
  display: flex;
  align-items: center; /* Centrado VERTICAL */
  
  /* Habilitar scroll si se desborda */
  overflow: auto; 
  
  /* Estilización scroll */
  scrollbar-width: thin;
  scrollbar-color: var(--c-p-normal) #f1f1f1;
}

#card-error{
  font-size: 0.85rem;
  font-weight: 700;
  color: #e74c3c;
  margin-top: -8px;
  min-height: 18px; /* para que no “salte” el layout */
}

/* Estilos Webkit para scrollbar */
#checkout::-webkit-scrollbar { height: 8px; width: 8px; }
#checkout::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
#checkout::-webkit-scrollbar-thumb { background-color: var(--c-p-normal); border-radius: 10px; }

/* Botón */
button#submit {
  width: 100%; padding: 18px; border: none;
  border-radius: var(--radius-btn);
  font-size: 16px; font-weight: 700; cursor: pointer;
  color: var(--c-n-white); background: var(--c-p-normal);
  box-shadow: 0 10px 20px rgba(255, 40, 34, 0.3);
  display: flex; justify-content: center; align-items: center; gap: 10px;
  transition: all 0.3s;
}
button#submit:disabled { background: var(--c-n-lightGrey); cursor: not-allowed; box-shadow: none; }

.security-footer {
  text-align: center; font-size: 0.75rem; color: var(--c-n-lightGrey);
  margin-top: 20px; display: flex; align-items: center; justify-content: center; gap: 6px;
}

/* =========================================
   MEDIA QUERY: MOBILE (< 500px)
   ========================================= */
@media (max-width: 500px) {
  body { padding: 0; align-items: flex-start; }
  
  .main-container {
    height: 100vh;
    border-radius: 0;
    overflow-y: auto; 
  }

  .visual-side { padding: 20px; background: #fcfcfc; }
  .form-side { padding: 20px; }

  /* MÓVIL: Alineación a la izquierda para permitir scroll */
  #checkout {
    justify-content: flex-start; 
  }

  /* Forzamos al iframe a ser grande para activar scroll */
  #checkout iframe {
    min-width: 500px !important; 
    flex-shrink: 0; /* Evita que se encoja */
    margin: 0;      /* Sin margen auto para respetar flex-start */
  }
}

/* =========================================
   MEDIA QUERY: TABLET & DESKTOP (> 501px)
   Aquí unificamos la lógica de centrado perfecto
   ========================================= */
@media (min-width: 501px) {
  
  /* Ajustes generales de layout según tamaño */
  .main-container { margin: 20px; max-width: 500px; }
  .visual-side, .form-side { padding: 30px; }

  /* TABLET/DESKTOP: CENTRADO TOTAL */
  #checkout {
    justify-content: center; /* Centrado HORIZONTAL */
    /* background-color: #D4AF37; */
  }

  #checkout iframe {
    width: 100% !important;
    /* TRUCO: Limitamos el ancho máximo del iframe. 
       Esto hace que se vea como una tarjeta centrada en lugar de estirarse a la izquierda. */
    max-width: 450px !important; 
    
    /* Importante: NO forzar height 100%. 
       Dejarlo auto permite que flexbox lo centre verticalmente en el espacio de 300px */
    /* height: auto !important;  */
    min-height: 200px; /* Un mínimo por seguridad */
  }
}

/* =========================================
   MEDIA QUERY: DESKTOP SPECIFIC (> 1025px)
   Solo ajustes de layout Split View
   ========================================= */
@media (min-width: 1025px) {
  body { background: radial-gradient(circle at center, #eee 0%, #ddd 100%); }

  .main-container {
    max-width: 950px;
    height: 600px;
    max-height: 90vh; 
    flex-direction: row; 
  }

  .visual-side {
    flex: 1; background: #FAFAFA; border-right: 1px solid #eee;
    padding: 50px; display: flex; flex-direction: column; justify-content: center;
  }

  .form-side {
    flex: 1; padding: 0; 
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    overflow-y: auto; height: 100%; 
  }
  
  /* Wrapper interno para asegurar que nada se salga de ancho en pantallas muy grandes */
  .payment-section { width: 100%; max-width: 420px; padding: 0 20px; }
}